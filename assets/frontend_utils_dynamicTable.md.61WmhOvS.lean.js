import{_,D as h,o as e,c as g,I as s,w as n,a as u,F as m,b as o,E as C,a1 as T,R as B}from"./chunks/framework.3IDgao2s.js";const f={name:"AddRecipe",data(){return{dynamicTableData:[{index:0,recipeType:"",recipeTypeItems:[{dictValue:0,dictLabel:"面种"},{dictValue:1,dictLabel:"包体"},{dictValue:2,dictLabel:"配方"}],recipeId:null,remark:"",recipeList:[{id:0,recipeName:"高筋粉"},{id:1,recipeName:"低筋粉"},{id:3,recipeName:"黄油"},{id:4,recipeName:"牛奶"}]}],recipeTypeItems:[],recipeMap:new Map}},watch:{dynamicTableData:{deep:!0,handler(l,p){this.changeData()}}},methods:{addRecipe(){const p=this.dynamicTableData.length;this.dynamicTableData.push({index:parseInt(p),recipeType:"",recipeTypeItems:[{dictValue:0,dictLabel:"面种"},{dictValue:1,dictLabel:"包体"},{dictValue:2,dictLabel:"配方"}],recipeId:null,remark:"",recipeList:[{id:0,recipeName:"高筋粉"},{id:1,recipeName:"低筋粉"},{id:3,recipeName:"黄油"},{id:4,recipeName:"牛奶"}]})},changeRecipeType(l){const p=l.index,t=l.recipeType;this.dynamicTableData[p].recipeList=this.recipeMap[t]},changeData(){console.log(this.dynamicTableData)},delProperty(l,p){const t=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const E=t.dynamicTableData;for(let k=0;k<E.length;k++)p.index===E[k].index&&(E.splice(k,1),this.$message({message:"删除成功",duration:2e3,type:"success"}))}).catch(()=>{this.$message({message:"删除失败",duration:2e3,type:"error"})}),this.changeData()},tabKeyHandler(l){console.log(l),this.addProperty()}}},x={style:{margin:"20px 20px"}};function w(l,p,t,E,k,r){const c=h("el-button"),D=h("el-form-item"),A=h("el-form"),d=h("el-table-column"),F=h("el-option"),b=h("el-select"),q=h("el-table");return e(),g("div",x,[s(A,{inline:"","label-width":"100px","label-position":"right"},{default:n(()=>[s(D,null,{default:n(()=>[s(c,{type:"primary",onClick:r.addRecipe},{default:n(()=>[u("添加配方")]),_:1},8,["onClick"])]),_:1})]),_:1}),s(q,{data:k.dynamicTableData,border:"",stripe:"",style:{width:"100%"}},{default:n(()=>[s(d,{type:"index",label:"序号",width:"100"}),s(d,{prop:"recipeType",label:"配方类型"},{default:n(({row:i})=>[s(b,{modelValue:i.recipeType,"onUpdate:modelValue":a=>i.recipeType=a,filterable:"",clearable:""},{default:n(()=>[(e(!0),g(m,null,C(i.recipeTypeItems,(a,y)=>(e(),o(F,{key:y,value:a.dictValue,label:a.dictLabel},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),s(d,{prop:"recipeId",label:"配方名称"},{default:n(({row:i})=>[s(b,{modelValue:i.recipeId,"onUpdate:modelValue":a=>i.recipeId=a,filterable:"",clearable:"",onChange:a=>r.changeRecipeType(i)},{default:n(()=>[(e(!0),g(m,null,C(i.recipeList,(a,y)=>(e(),o(F,{key:y,value:a.id,label:a.recipeName},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),s(d,{label:"操作",width:"300"},{default:n(({row:i})=>[s(c,{size:"mini",type:"danger",plain:"",onKeydown:T(r.tabKeyHandler,["tab","native"]),onClick:a=>r.delProperty(i.$index,i)},{default:n(()=>[u(" 删除 ")]),_:2},1032,["onKeydown","onClick"])]),_:1})]),_:1},8,["data"])])}const v=_(f,[["render",w]]),V=B("",4),I=B("",7),R=JSON.parse('{"title":"1. 动态增减表格","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/utils/dynamicTable.md","filePath":"frontend/utils/dynamicTable.md"}'),L={name:"frontend/utils/dynamicTable.md"},P=Object.assign(L,{setup(l){return(p,t)=>(e(),g("div",null,[V,s(v),I]))}});export{R as __pageData,P as default};
