::: info
本文档来自于 [尚硅谷ElasticSearch](https://www.bilibili.com/video/BV1hh411D7sb) 和[ElasticSearch学习笔记](https://luzhenyu.blog.csdn.net/article/details/123411411)
:::
# 1. ElasticSearch入门

## 1. 下载安装

### 1. Windows下安装

1. [官网下载  https://www.elastic.co/cn/downloads/elasticsearch](https://www.elastic.co/cn/downloads/elasticsearch)

2. 安装

```shell
#windows 下 直接解压缩，
# 执行bin下边的 elasticSearch.bat
```

3. 运行成功之后`9300`为Es内部通信端口 `9200`为RestFul接口访问端口,浏览器访问[http://192.168.0.107:9200](http://192.168.0.107:9200), **<font color=red>看自己的控制台打印什么就访问什么地址</font>**

```shell
[2024-06-15T17:16:38,580][INFO ][o.e.t.TransportService   ] [ELEVEN] publish_address {127.0.0.1:9300}, bound_addresses {[::1]:9300}, {127.0.0.1:9300}
[2024-06-15T17:16:39,030][INFO ][o.e.h.AbstractHttpServerTransport] [ELEVEN] publish_address {192.168.0.107:9200}, bound_addresses {[::]:9200}
```

4. 因为我安装的是`8.14.1`版本，所以可能会出现一下问题，这种情况就需要访问[https://192.168.0.107:9200](https://192.168.0.107:9200)，提示不安全的话直接继续访问就行了

```shell
 received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/192.168.0.107:9200, remoteAddress=/192.168.0.107:59900}
```

5. 高版本的`elasticSearch`访问后需要认证，默认的用户名为`elastic`，需要生成密码

```shell
# windows下加/d不用使用E:切换盘符
cd /d E:\ide\elastic-8.14.1\bin
# 生成密码
elasticsearch-reset-password -u elastic
# 输入信息
warning: ignoring JAVA_HOME=C:\Program Files\Java\jdk-21; using bundled JDK
This tool will reset the password of the [elastic] user to an autogenerated value.
The password will be printed in the console.
Please confirm that you would like to continue [y/N]y

# 生成的密码是这个
Password for the [elastic] user successfully reset.
New value: e7_j=hfoRxme10KcrQCn
```

还有一个链接可以改密码，[CSDN Elasticsearch如何设置密码](https://blog.csdn.net/u012069313/article/details/136163249)

6. 访问出现下边的数据，就成功了

```json
{
  "name" : "ELEVEN",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "ncpM6LAXQ3WJkaBX-qBPjQ",
  "version" : {
    "number" : "8.14.1",
    "build_flavor" : "default",
    "build_type" : "zip",
    "build_hash" : "93a57a1a76f556d8aee6a90d1a95b06187501310",
    "build_date" : "2024-06-10T23:35:17.114581191Z",
    "build_snapshot" : false,
    "lucene_version" : "9.10.0",
    "minimum_wire_compatibility_version" : "7.17.0",
    "minimum_index_compatibility_version" : "7.0.0"
  },
  "tagline" : "You Know, for Search"
}
```

### x. 遇见的问题

1. 打不开9200端口

> 使用8.X版本的elasticSearch，需要使用<font color=red>https://</font>协议进行访问

```shell
received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/192.168.0.107:9200, remoteAddress=/192.168.0.107:59900}
```

2. 需要账号密码

```shell
# 给默认账号elastic生成密码
elasticsearch-reset-password -u elastic
```

3. 运行闪退

> 修改`config/jvm.options`文件

```shell
-Xms1g
-Xmx1g
```

### 2. 倒排索引

1. 正排索引

> 就如同mysql等关系型数据库一样，存在以下数据库，通过id关联内容

| id   | content      |
| ---- | ------------ |
| 1    | My name is 1 |
| 2    | name is You  |

2. 倒排索引

> 通过关键字，告诉当前关键字在哪些文档里

| keywords | id   |
| -------- | ---- |
| name     | 1,2  |
| You      | 2    |

## 2. 基础操作

### 1. 索引操作

1. 创建索引 

- 使用ApiPost发送下列请求

```shell
PUT https://localhost:9200/shopping
```

- 如果提示`missing authentication credentials for REST request [/shopping]`,那就在apipost的认证里选择Basic auth，填上刚才的账号密码
- 或者在`https://localhost:9200`浏览器里边看控制台的header

- 提示下列信息就代表创建完成

```json
{
	"acknowledged": true,
	"shards_acknowledged": true,
	"index": "shopping"
}
```

2. 获取索引信息

```shell
GET https://localhost:9200/shopping
```

```json
{
	"shopping": {
		"aliases": {},
		"mappings": {},
		"settings": {
			"index": {
				"routing": {
					"allocation": {
						"include": {
							"_tier_preference": "data_content"
						}
					}
				},
				"number_of_shards": "1",
				"provided_name": "shopping",
				"creation_date": "1718445301164",
				"number_of_replicas": "1",
				"uuid": "faG0UdjXRPm67kU3GuQoAA",
				"version": {
					"created": "8505000"
				}
			}
		}
	}
}
```

3. 获取所有的索引

```shell
GET http://localhost:9200/_cat/indices?v
```

```shell
health status index    uuid                   pri rep docs.count docs.deleted store.size pri.store.size dataset.size
yellow open   shopping faG0UdjXRPm67kU3GuQoAA   1   1          0            0       249b           249b         249b
```

4. 删除索引

```shell
DELETE https://localhost:9200/shopping
```

```json
{
	"acknowledged": true
}
```

### 2. 文档操作

1. 